<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sign_up_top</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">

    <link rel="stylesheet" href="../../css/member/member.css">
    <link href="../../css/merch/singleMerch.css" rel="stylesheet" />
	<link rel="icon" href="../../images/artionLogo.png" type="image/png">
</head>

<body>
    <!-- 整個頁面容器開始 -->
    <div class="container-fluid p-0">
        <!-- navbar top (sign_up)start -->
        <!--  navbar_mob_state 開始-->
        <nav class="navbar_mob navbar navbar-expand-lg navbar-light bg-light  sticky-top navbar_mob_state ">
            <div class="container-fluid  relative d-flex justify-content-end">
                <a class="navbar-brand mx-auto fixed_center logo" href="#">Artion</a>


                <div class="shoppingCart p-2 member_svg">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" class="bi bi-cart3"
                        viewBox="0 0 16 16">
                        <path
                            d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .49.598l-1 5a.5.5 0 0 1-.465.401l-9.397.472L4.415 11H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l.84 4.479 9.144-.459L13.89 4H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z" />
                    </svg>
                </div>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse  " id="navbarSupportedContent">
                    <form class="my-2 navbar_mob">
                        <input class="form-control me-2" type="search" placeholder="" aria-label="Search">
                        <button class="colortest btn_old  w-50 me-2" type="submit">搜尋</button>
                    </form>
                    <a class="nav-link display_none_6 " href="./member_logUp.html">
                        <button type="button" class="colortest btn_old ">登入/註冊</button>
                    </a>
                    <ul class="navbar-nav col-12 me-2   ">

                        <li class="nav-item dropdown  ">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                活動類型
                            </a>
                            <ul class="dropdown-menu text_align_center" aria-labelledby="navbarDropdown">
                                <li><a class="dropdown-item hover" href="#">全部</a></li>
                                <li><a class="dropdown-item hover" href="#">展覽</a></li>
                                <li><a class="dropdown-item hover" href="#">市集</a></li>
                                <li><a class="dropdown-item hover" href="#">表演</a></li>
                            </ul>
                        </li>
                        <li class="nav-item ">
                            <a class="nav-link triangle hover member_svg" href="#" id="navbarDropdown" role="button"
                                aria-expanded="false">
                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 20 20">
                                    <path
                                        d="M16.219 1.943c.653.512 1.103 1.339 1.287 2.205a.474.474 0 0 1 .065.026l2.045.946a.659.659 0 0 1 .384.597v12.367a.665.665 0 0 1-.85.634l-5.669-1.6l-6.74 1.858a.674.674 0 0 1-.371-.004L.474 17.217a.66.66 0 0 1-.474-.63V3.998c0-.44.428-.756.855-.632l5.702 1.661l2.898-.887a.734.734 0 0 1 .122-.025c.112-.656.425-1.286.95-1.9c.623-.73 1.716-1.158 2.781-1.209c1.105-.053 1.949.183 2.91.936ZM1.333 4.881v11.215l4.87 1.449V6.298l-4.87-1.417Zm8.209.614l-2.006.613v11.279l5.065-1.394v-3.295c0-.36
                        4.299-.659.667-.659c.368 0 .666.295.666.66v3.177l4.733 1.335V6.136l-1.12-.52c-.019.11-.043.218-.073.323A6.134 6.134 0 0 1 16.4 8.05l-2.477 3.093a.67.67 0 0 1-1.073-.037l-2.315-3.353c-.382-.534-.65-1.01-.801-1.436a3.744 3.744 0 0 1-.192-.822Zm3.83-3.171c-.726.035-1.472.327-1.827.742c-.427.5-.637.968-.679 1.442c-.05.571-.016.974.126 1.373c.105.295.314.669.637 1.12l1.811 2.622l1.91-2.385a4.812 4.812 0 0 0 .841-1.657c.24-.84-.122-2.074-.8-2.604c-.695-.545-1.22-.692-2.018-.653Zm.138.697c1.104 0 2 .885 2 1.977a1.988 1.988 0 0 1-2 1.977c-1.104 0-2-.885-2-1.977s.896-1.977 2-1.977Zm0 1.318a.663.663 0 0 0-.667.659c0 .364.299.659.667.659a.663.663 0 0 0 .666-.66a.663.663 0 0 0-.666-.658Z" />
                                </svg>
                                地圖
                            </a>
                        </li>


                    </ul>

                </div>
            </div>
        </nav>
        <!--  navbar_mob_state 結束-->

        <!--   navbar_sm_state 開始-->
        <nav class="navbar navbar-expand-lg navbar-light bg-light  sticky-top navbar_sm_state p-0">
            <div class="container-fluid ">
                <a class="navbar-brand mx-5 logo " href="#">Artion</a>

                <div class="shoppingCart member_svg p-2 margin_auto display_none_6">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" class="bi bi-cart3"
                        viewBox="0 0 16 16">
                        <path
                            d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .49.598l-1 5a.5.5 0 0 1-.465.401l-9.397.472L4.415 11H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l.84 4.479 9.144-.459L13.89 4H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z" />
                    </svg>
                </div>
                <a class="nav-link display_none_6  mx-3" href="./member_logUp.html">
                    <button type="button" class="colortest btn_old   ">登入/註冊</button>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse  d-flex-sm justify-content-end" id="navbarSupportedContent">
                    <ul class="navbar-nav col-1-sm me-2  mb-lg-0 ">
                        <li class="nav-item dropdown   ">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                活動類型
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <li><a class="dropdown-item hover" href="#">全部</a></li>
                                <li><a class="dropdown-item hover" href="#">展覽</a></li>
                                <li><a class="dropdown-item hover" href="#">市集</a></li>
                                <li><a class="dropdown-item hover" href="#">表演</a></li>
                            </ul>
                        </li>

                    </ul>
                    <form class="d-flex my-2 ">
                        <input class="form-control me-2" type="search" placeholder="" aria-label="Search">
                        <button class="colortest btn_old  w-50 me-2" type="submit">搜尋</button>
                    </form>
                    <div class="shoppingCart member_svg p-2 display_none_7">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" class="bi bi-cart3"
                            viewBox="0 0 16 16">
                            <path
                                d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .49.598l-1 5a.5.5 0 0 1-.465.401l-9.397.472L4.415 11H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l.84 4.479 9.144-.459L13.89 4H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z" />
                        </svg>
                    </div>

                    <div class="map p-2 member_svg display_none_7">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 20 20">
                            <path
                                d="M16.219 1.943c.653.512 1.103 1.339 1.287 2.205a.474.474 0 0 1 .065.026l2.045.946a.659.659 0 0 1 .384.597v12.367a.665.665 0 0 1-.85.634l-5.669-1.6l-6.74 1.858a.674.674 0 0 1-.371-.004L.474 17.217a.66.66 0 0 1-.474-.63V3.998c0-.44.428-.756.855-.632l5.702 1.661l2.898-.887a.734.734 0 0 1 .122-.025c.112-.656.425-1.286.95-1.9c.623-.73 1.716-1.158 2.781-1.209c1.105-.053 1.949.183 2.91.936ZM1.333 4.881v11.215l4.87 1.449V6.298l-4.87-1.417Zm8.209.614l-2.006.613v11.279l5.065-1.394v-3.295c0-.36
                            4.299-.659.667-.659c.368 0 .666.295.666.66v3.177l4.733 1.335V6.136l-1.12-.52c-.019.11-.043.218-.073.323A6.134 6.134 0 0 1 16.4 8.05l-2.477 3.093a.67.67 0 0 1-1.073-.037l-2.315-3.353c-.382-.534-.65-1.01-.801-1.436a3.744 3.744 0 0 1-.192-.822Zm3.83-3.171c-.726.035-1.472.327-1.827.742c-.427.5-.637.968-.679 1.442c-.05.571-.016.974.126 1.373c.105.295.314.669.637 1.12l1.811 2.622l1.91-2.385a4.812 4.812 0 0 0 .841-1.657c.24-.84-.122-2.074-.8-2.604c-.695-.545-1.22-.692-2.018-.653Zm.138.697c1.104 0 2 .885 2 1.977a1.988 1.988 0 0 1-2 1.977c-1.104 0-2-.885-2-1.977s.896-1.977 2-1.977Zm0 1.318a.663.663 0 0 0-.667.659c0 .364.299.659.667.659a.663.663 0 0 0 .666-.66a.663.663 0 0 0-.666-.658Z" />
                        </svg>
                    </div>


                    <a class="nav-link display_none_7" href="./member_logUp.html">
                        <button type="button" class="colortest btn_old  mx-4 ">登入/註冊</button>
                    </a>
                </div>
            </div>
        </nav>

        <!--   navbar_sm_state 結束-->
        <!-- navbar top (sign_up)end -->
        <div class="container-fluid">
            <!--除了navbar 以外的東西放裡面 -->
            <div class="container">
                <!-- 大正方形圖片 -->
                <div class="big-square">
                    <img src="" alt="" id="merPic1">
                </div>

                <!-- 右側小正方形圖片容器 -->
                <div class="small-square-container">
                    <div class="small-square">
                        <img src="" alt="" id="merPic1">
                    </div>
                    <div class="small-square">
                        <img src="" alt="" id="merPic2">
                    </div>
                    <div class="small-square">
                        <img src="" alt="" id="merPic3">
                    </div>
                    <div class="small-square">
                        <img src="" alt="" id="merPic4">
                    </div>
                </div>
            </div>

            <!-- 商品簡介區域 -->
            <div class="product-description">
                <h2 id="merchName">商品名稱</h2>
                <p id="merchSort">商品種類</p>
                <p id="merchInfo">這裡放商品說明~~這裡放商品說明~~這裡放商品說明~~這裡放商品說明~~這裡放商品說明~~這裡放商品說明~~這裡放商品說明~~這裡放商品說明~~這裡放商品說明~~這裡放商品說明~~</p>

                <!-- 商品價格和數量選擇 -->
                <div class="product-info">
                    <span >商品價格:</span>
                    <span id="merchPrice">200元</span>
                    <br>
                    <span>剩餘件數: </span>
                    <span id="remainingQuantity">100 </span>
                    <span>件</span>
                    <br>
                    <div style="display: flex; align-items: center;">
                        <label for="quantity">數量: </label>
                        <input type="number" id="quantity" min="1" style="width: 60px; margin-left: 10px;" value="1" >
                        <!-- 加入購物車和立即購買按鈕 -->
                        <div class="buttons">
                            <button type="button" class="btn btn-outline-danger" style="margin-left: 10px;"
                                id="addToCart">加入購物車</button>
                            <button type="button" class="btn btn-outline-danger" style="margin-left: 10px;"
                                id="buyNow">立即購買</button>
                        </div>
                        <span id="errorMessage" style="color: red; margin-left: 10px;"></span>
                    </div>
                </div>


            </div>

        </div>

    </div>
    <!-- 整個頁面容器結束 -->
    </div>
    <!-- 即時客服開始 -->
    <div class="fixed-bottom heading member_svg">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" class="bi bi-chat-text" viewBox="0 0 16 16">
            <path
                d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z" />
            <path
                d="M4 5.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8zm0 2.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5z" />
        </svg>
    </div>
    <!-- 即時客結束 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</body>
<script>
//畫面載入時，取得該商品ID的資料(未完成)
$(document).ready(function () {
    var urlParams = new URLSearchParams(window.location.search);
    var merchId = urlParams.get("merchId");
    console.log("取得merchId=" + merchId);
    if (merchId) {
        $.ajax({
            type: "POST",
            url: "http://localhost:8081/artion/getAllMerch", // 用于获取商品详细信息的Servlet URL
            data: { merchId: merchId }, // 发送商品ID作为数据
            dataType: "JSON",
            success: function (data) {
                var merchData = data.find(function(merch){
                    return merch.merchId == merchId;
                })
                if(merchData){
                    $("#merchName").text(data.merchName);
                    $("#merchSort").text(data.merchSort);
                    $("#merchInto").text(data.merchIntroduction);
                    $("#merchPrice").text(data.merchPrice);
                    $("#remainingQuantity").text(data.merchTotal - data.merchSellAmount);
                    
                    var img1 = "http://localhost:8081/artion/merPicServlet?merchId=" + merchId + "&picNumber=" + 1;
                        $("#merPic1").attr("src", img1);
                        console.log(img1);
                    var img2 = "http://localhost:8081/artion/merPicServlet?merchId=" + merchId + "&picNumber=" + 2;
                        $("#merPic2").attr("src", img2);
                    var img2 = "http://localhost:8081/artion/merPicServlet?merchId=" + merchId + "&picNumber=" + 3;
                        $("#merPic3").attr("src", img3);
                    var img3 = "http://localhost:8081/artion/merPicServlet?merchId=" + merchId + "&picNumber=" + 4;
                        $("#merPic4").attr("src", img4);
                }
                console.log("成功取得merchId和資料");
                
            },
            error: function () {
                alert("無法取得商品資料");
            }
        });
    } else {
    	$(".product-description").empty();
        $("#merchName").text("未找到商品");
        
        
    }
});


//周邊商品圖片切換功能
$(document).ready(function () {
    var smallSquares = $('.small-square');

    smallSquares.click(function () {
        var clickedImg = $(this).find('img');
        var bigSquare = $('.big-square');
        bigSquare.html(clickedImg.clone());
    });
});

//判斷周邊商品加入購物車或立即購買是否超過庫存量
$(document).ready(function() {
    const remainingQuantity = $("#remainingQuantity");
    const quantityInput = $("#quantity");
    const addToCartButton = $("#addToCart");
    const buyNowButton = $("#buyNow");
    const errorMessage = $("#errorMessage");
    addToCartButton.click(function() {
        const selectedQuantity = parseInt(quantityInput.val(), 10);
        const availableQuantity = parseInt(remainingQuantity.text(), 10);

        if (selectedQuantity > availableQuantity) {
            errorMessage.text("超過庫存量");
        } else {
            errorMessage.text("");
        }
    });
    buyNowButton.click(function() {
        const selectedQuantity = parseInt(quantityInput.val(), 10);
        const availableQuantity = parseInt(remainingQuantity.text(), 10);

        if (selectedQuantity > availableQuantity) {
            errorMessage.text("超過庫存量");
        } else {
            errorMessage.text("");
        }
    });
});
</script>

</html>