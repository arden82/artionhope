<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>login</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
<!-- 	<link rel="icon" href="../../images/artionLogo.png" type="image/png"> -->
	<link rel="stylesheet" href="../../css/member/member.css">
	<link rel="stylesheet" href="../../css/merch/merchPage.css">
</head>
<body>
	<!-- 整個頁面容器開始 -->
	<div class="container-fluid p-0">
        <div class="loginstate"></div>
		<div class="container-fluid">
			<!--除了navbar 以外的東西放裡面 -->
				<!-- 標題start -->
            <div class="product_page_top" style="border:0px green solid;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <label for="validationTextarea" class="form-label"
                        style="font-size: 25px; margin: 0px 240px;">周邊商品</label>

                    <!-- 排序篩選器start -->
                    <div style="margin-right: 50px;">
                        <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"
                            aria-expanded="false">排序方式</button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#">時間:由新至舊</a></li>
                            <li><a class="dropdown-item" href="#">時間:由舊至新</a></li>
                            <li><a class="dropdown-item" href="#">價格:由高至低</a></li>
                            <li><a class="dropdown-item" href="#">價格:由低至高</a></li>
                            <li><a class="dropdown-item" href="#">銷售量:由多至少</a></li>
                        </ul>
                    </div>
                    <!-- 排序篩選器end -->

                </div>
            </div>
            <!-- 標題end -->

            <!-- 商品種類與商品列表 start -->
            <span style="display: flex;">
                <!-- 商品種類與價格區間篩選start -->
                <span style="border: 0px gray solid; width: 200px; height: 300px; padding: 20px 0px 0px 20px;">
                    <!-- 商品種類start -->
                    <p style="border:0px blue solid;font-weight: bold;margin-bottom: 5px; font-size: 20px;">商品種類</p>
                    <label style="border:0px red solid; margin-left: 20px;">
                        <input type="checkbox" id="allProducts" onclick="toggleAllCategories()"> 所有商品
                    </label>
                    <br>
                    <label style="border:0px red solid; margin-left: 40px;">
                        <input type="checkbox" class="category" value="服飾"> 服飾
                    </label>
                    <br>
                    <label style="border:0px red solid; margin-left: 40px;">
                        <input type="checkbox" class="category" value="配件"> 配件
                    </label>
                    <br>
                    <label style="border:0px red solid; margin-left: 40px;">
                        <input type="checkbox" class="category" value="其他"> 其他
                    </label>
                    <br>
                    <!-- 價格區間start -->
                    <p style="border:0px blue solid; margin-bottom: 5px; font-weight: bold;  font-size: 20px;">價格區間</p>
                    <label style="border:0px blue solid; margin-bottom: 5px; margin-left: 20px;">
                        <input type="radio" name="priceRange" value="全部" checked> 全部
                    </label>
                    <br>
                    <label style="border:0px blue solid; margin-bottom: 5px;margin-left: 20px;">
                        <input type="radio" name="priceRange" value="500元以下"> 500元以下
                    </label>
                    <br>
                    <label style="border:0px blue solid; margin-bottom: 5px;margin-left: 20px;">
                        <input type="radio" name="priceRange" value="500元~1000元"> 500元~1000元
                    </label>
                    <br>
                    <label style="border:0px blue solid; margin-bottom: 5px;margin-left: 20px;">
                        <input type="radio" name="priceRange" value="1000元以上"> 1000元以上
                    </label>
                </span>
                <!-- 商品種類與價格區間篩選end -->
                <!-- 商品列表右側區塊start -->
                <div class="products_page_right" style="border:0px gray solid;">
                    <!-- 商品列表start -->
                    <!-- <span class="merchBox">
                        <a href="" class="merchBox_child">
                            <img src="./image/Ugly Beauty 夜光Tee黑色.jpeg" class="card-img-top" alt="..."
                                class="merchStyle">
                            <p class="merchName">商品名稱</p>
                            <p class="merchPrice">商品金額</p>
                        </a>
                    </span> -->
                    <div id="merchContainer">商品載入中</div>
                    <!-- 商品列表end -->
                </div>
                <!-- 商品列表右側區塊end -->
            </span>
            <!-- 商品種類與商品列表 end -->
			


		</div>
	</div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
        crossorigin="anonymous"></script>
        <script src="./logstate.js"></script>
        <script>
        // ===================== 商品篩選功能 =====================
        function toggleAllCategories() {
            var allProductsCheckbox = document.getElementById("allProducts");
            var categoryCheckboxes = document.getElementsByClassName("category");

            for (var i = 0; i < categoryCheckboxes.length; i++) {
                categoryCheckboxes[i].checked = allProductsCheckbox.checked;
            }
        }
        //  ===================== 商品陳列() =====================
        // $(document).ready(function () {
        //     $.ajax({
        //         url: '',//getMerch
        //         type: 'get',
        //         success: function (args) {

        //         }
        //     })
        // })
        //     for (var i = 1; i <= 16; i++) {
        //     var $span = $('<span>', {
        //         'class': 'merchBox',
        //         'html': '<a href="" class="merchBox_child">' +
        //             '<img src="./image/Ugly Beauty 夜光Tee黑色.jpeg" class="card-img-top merchStyle" alt="...">' +
        //             '<p class="merchName">商品名稱</p>' +
        //             '<p class="merchPrice">商品金額</p>' +
        //             '</a>'
        //     });
        //     $('#merchContainer').append($span);
        // }
     // ===================== 載入網頁時取得所有商品 =====================
        $(document).ready(function () {
        	if (window.location.href.includes("http://localhost:8081/artion/html/merch/merchPage.html")) {

                $.ajax({
                    type: "POST",
                    url: "http://localhost:8081/artion/getAllMerch",
                    dataType: "JSON",
                    success: function (data) {
                    	console.log("發送請求成功");
                        var merchContainer = $("#merchContainer");
                        merchContainer.empty();
                        $.each(data, function (index, merch) {
                        	var merches = `
                        	    <div href="" class="merchBox_child" data-merchid="${merch.merchId}" style="margin-right:10px;">
                        	        <img src="http://localhost:8081/artion/merPicServlet?merchId=${merch.merchId}" class="card-img-top merchStyle" alt="..." >
                        	        <p class="merchName">${merch.merchName}</p>
                        	        <p class="merchPrice">${merch.merchPrice}元</p>
                        	    </div>
                        	`;
                            $("#merchContainer").append(merches);
                        });

                        // 點擊事件監聽器
                        $(".merchBox_child").click(function () {
                            console.log("有點到商品");
                            console.log($(this)); // 输出点击的元素
                            var merchId = $(this).data("merchid");
                            console.log(`跳转到 singleMerch.html?merchId=${merchId}`);
                            window.location.href = `singleMerch.html?merchId=${merchId}`;
                        });


                    },
                    error: function () {
                        alert("無法取得數據");
                    }
                });
            }
        });
    </script>
<!-- jquery JS匯入 -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- simplePagination JS匯入 -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/simplePagination.js/1.6/jquery.simplePagination.min.js"
        integrity="sha512-9Dh726RTZVE1k5R1RNEzk1ex4AoRjxNMFKtZdcWaG2KUgjEmFYN3n17YLUrbHm47CRQB1mvVBHDFXrcnx/deDA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
</body>
</html>