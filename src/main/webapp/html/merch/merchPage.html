<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>merchPage</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet" href="../../css/activity/member.css">
    <link rel="stylesheet" href="../../css/merch/merchPage.css">
<!-- jquery JS匯入 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- simplePagination JS匯入 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/simplePagination.js/1.6/jquery.simplePagination.min.js"
        integrity="sha512-9Dh726RTZVE1k5R1RNEzk1ex4AoRjxNMFKtZdcWaG2KUgjEmFYN3n17YLUrbHm47CRQB1mvVBHDFXrcnx/deDA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <link rel="icon" href="../../images/artionLogo.png" type="image/png">
</head>

<body>
    <!-- 整個頁面容器開始 -->
    <div class="container-fluid p-0">
      <div class="loginstate"></div>
        <!-- navbar top (sign_up)end -->
        <div class="container-fluid">
            <!--除了navbar 以外的東西放裡面 -->
            <!-- 標題start -->
            <div class="product_page_top" style="border:0px green solid;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <label for="validationTextarea" class="form-label"
                        style="font-size: 25px; margin: 0px 240px;">周邊商品</label>

                    <!-- 排序篩選器start -->
                    <div style="margin-right: 50px;">
                        <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"
                            aria-expanded="false">排序方式</button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#">時間:由新至舊</a></li>
                            <li><a class="dropdown-item" href="#">時間:由舊至新</a></li>
                            <li><a class="dropdown-item" href="#">價格:由高至低</a></li>
                            <li><a class="dropdown-item" href="#">價格:由低至高</a></li>
                            <li><a class="dropdown-item" href="#">銷售量:由多至少</a></li>
                        </ul>
                    </div>
                    <!-- 排序篩選器end -->

                </div>
            </div>
            <!-- 標題end -->

            <!-- 商品種類與商品列表 start -->
            <span style="display: flex;">
                <!-- 商品種類與價格區間篩選start -->
                <span style="border: 0px gray solid; width: 200px; height: 300px; padding: 20px 0px 0px 20px;">
                    <!-- 商品種類start -->
                    <p style="border:0px blue solid;font-weight: bold;margin-bottom: 5px; font-size: 20px;">商品種類</p>
                    <label style="border:0px red solid; margin-left: 20px;">
                        <input type="checkbox" id="allProducts" onclick="toggleAllCategories()"> 所有商品
                    </label>
                    <br>
                    <label style="border:0px red solid; margin-left: 40px;">
                        <input type="checkbox" class="category" value="服飾"> 服飾
                    </label>
                    <br>
                    <label style="border:0px red solid; margin-left: 40px;">
                        <input type="checkbox" class="category" value="配件"> 配件
                    </label>
                    <br>
                    <label style="border:0px red solid; margin-left: 40px;">
                        <input type="checkbox" class="category" value="其他"> 其他
                    </label>
                    <br>
                    <!-- 價格區間start -->
                    <p style="border:0px blue solid; margin-bottom: 5px; font-weight: bold;  font-size: 20px;">價格區間</p>
                    <label style="border:0px blue solid; margin-bottom: 5px; margin-left: 20px;">
                        <input type="radio" name="priceRange" value="全部" checked> 全部
                    </label>
                    <br>
                    <label style="border:0px blue solid; margin-bottom: 5px;margin-left: 20px;">
                        <input type="radio" name="priceRange" value="500元以下"> 500元以下
                    </label>
                    <br>
                    <label style="border:0px blue solid; margin-bottom: 5px;margin-left: 20px;">
                        <input type="radio" name="priceRange" value="500元~1000元"> 500元~1000元
                    </label>
                    <br>
                    <label style="border:0px blue solid; margin-bottom: 5px;margin-left: 20px;">
                        <input type="radio" name="priceRange" value="1000元以上"> 1000元以上
                    </label>
                </span>
                <!-- 商品種類與價格區間篩選end -->
                <!-- 商品列表右側區塊start -->
                <div class="products_page_right" style="border:0px gray solid;">
                    <!-- 商品列表start -->
                    <!-- <span class="merchBox">
                        <a href="" class="merchBox_child">
                            <img src="./image/Ugly Beauty 夜光Tee黑色.jpeg" class="card-img-top" alt="..."
                                class="merchStyle">
                            <p class="merchName">商品名稱</p>
                            <p class="merchPrice">商品金額</p>
                        </a>
                    </span> -->
                    <div id="merchContainer">商品載入中</div>
                    <!-- 商品列表end -->
                </div>
                <!-- 商品列表右側區塊end -->
            </span>
            <!-- 商品種類與商品列表 end -->
        </div>
    </div>

    <!-- 整個頁面容器結束 -->
    </div>

    <!-- 即時客服開始 -->
    <div class="fixed-bottom heading member_svg">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" class="bi bi-chat-text" viewBox="0 0 16 16">
            <path
                d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z" />
            <path
                d="M4 5.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8zm0 2.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5z" />
        </svg>
    </div>
    <!-- 即時客結束 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
        crossorigin="anonymous"></script>

    <!----------------------- JS --------------------------->
    <script src="../../js/activity/logstate.js"></script>
    <script>
        let path = window.location.pathname;
        path = path.substring(0, path.indexOf("/",1));

        // ===================== 商品篩選功能 =====================
        function toggleAllCategories() {
            var allProductsCheckbox = document.getElementById("allProducts");
            var categoryCheckboxes = document.getElementsByClassName("category");

            for (var i = 0; i < categoryCheckboxes.length; i++) {
                categoryCheckboxes[i].checked = allProductsCheckbox.checked;
            }
        }
        //  ===================== 商品陳列() =====================
        // $(document).ready(function () {
        //     $.ajax({
        //         url: '',//getMerch
        //         type: 'get',
        //         success: function (args) {

        //         }
        //     })
        // })
        //     for (var i = 1; i <= 16; i++) {
        //     var $span = $('<span>', {
        //         'class': 'merchBox',
        //         'html': '<a href="" class="merchBox_child">' +
        //             '<img src="./image/Ugly Beauty 夜光Tee黑色.jpeg" class="card-img-top merchStyle" alt="...">' +
        //             '<p class="merchName">商品名稱</p>' +
        //             '<p class="merchPrice">商品金額</p>' +
        //             '</a>'
        //     });
        //     $('#merchContainer').append($span);
        // }
     // ===================== 載入網頁時取得所有商品 =====================
        $(document).ready(function () {
        	if (window.location.href.includes(`${window.location, path}/html/merch/merchPage.html`)) {

                $.ajax({
                    type: "POST",
                    url: `${window.location, path}/getAllMerch`,
                    dataType: "JSON",
                    success: function (data) {
                    	console.log("發送請求成功");
                        var merchContainer = $("#merchContainer");
                        merchContainer.empty();
                        $.each(data, function (index, merch) {
                        	var merches = `
                        	    <div href="" class="merchBox_child" data-merchid="${merch.merchId}" style="margin-right:10px;">
                        	        <img src=${window.location, path}/merPicServlet?merchId=${merch.merchId}&picNumber=1 class="card-img-top merchStyle" alt="..." >
                        	        <p class="merchName">${merch.merchName}</p>
                        	        <p class="merchPrice">${merch.merchPrice}元</p>
                        	    </div>
                        	`;
                            $("#merchContainer").append(merches);
                        });

                        // 點擊事件監聽器
                        $(".merchBox_child").click(function () {
                            console.log("有點到商品");
                            console.log($(this)); 
                            var merchId = $(this).data("merchid");
                            console.log(` singleMerch.html?merchId=${merchId}`);
                            window.location.href = `singleMerch.html?merchId=${merchId}`;
                        });


                    },
                    error: function () {
                        alert("無法取得數據");
                    }
                });
            }
        });
    </script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

<!-- <script src="js/products_page.js"></script> -->

</body>
</html>